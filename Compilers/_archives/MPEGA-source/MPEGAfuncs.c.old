/*------------------------------------------------------------------------------

    File    :   MPEGAfuncs.c

    Author  :   Stéphane TAVENARD

    (C) Copyright 1997-1997 Stéphane TAVENARD
        All Rights Reserved

    #Rev|   Date   |                      Comment
    ----|----------|--------------------------------------------------------
    0   |25/10/1997| Initial revision                                     ST

    ------------------------------------------------------------------------

    MPEGA library functions

------------------------------------------------------------------------------*/

#define __USE_SYSBASE

#include <exec/types.h>
#include <exec/memory.h>

#include <proto/exec.h>

#include "defs.h"
#include "/MPEGDEC_Lib/MPEGDEC.H"
#include "compiler.h"
#include "MPEGAfuncs.h"

// note a6 always point to our library

MPEGA_STREAM* __saveds __asm MPEGA_open( register __a0 char *filename,
                                         register __a1 MPEGA_CTRL *ctrl ) {

   return (MPEGA_STREAM *)MPEGDEC_open( filename, (MPEGDEC_CTRL *)ctrl );
}

void  __saveds __asm MPEGA_close( register __a0 MPEGA_STREAM *mpds ) {

   MPEGDEC_close( (MPEGDEC_STREAM *)mpds );
}

LONG  __saveds __asm MPEGA_decode_frame( register __a0 MPEGA_STREAM *mpds,
                                         register __a1 WORD *pcm[ MPEGA_MAX_CHANNELS ] ) {

   return (LONG)MPEGDEC_decode_frame( (MPEGDEC_STREAM *)mpds, pcm );
}

LONG  __saveds __asm MPEGA_seek( register __a0 MPEGA_STREAM *mpds,
                                 register __d0 ULONG ms_time_position ) {

   return (LONG)MPEGDEC_seek( (MPEGDEC_STREAM *)mpds, (UINT32)ms_time_position );
}

LONG  __saveds __asm MPEGA_time( register __a0 MPEGA_STREAM *mpds,
                                 register __a1 ULONG *ms_time_position ) {

   return (LONG)MPEGDEC_time( (MPEGDEC_STREAM *)mpds, (UINT32 *)ms_time_position );
}

LONG  __saveds __asm MPEGA_find_sync( register __a0 BYTE *buffer,
                                      register __d0 LONG buffer_size ) {

   return (LONG)MPEGDEC_find_sync( (INT8 *)buffer, (INT32)buffer_size );

}

