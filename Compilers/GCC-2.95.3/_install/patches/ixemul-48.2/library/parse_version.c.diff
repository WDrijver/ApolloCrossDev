--- ixemul-48.2.orig/library/parse_version.c	2001-08-21 17:33:32.000000000 +0200
+++ ixemul-48.2/library/parse_version.c	2012-08-03 18:49:15.000000000 +0200
@@ -1,5 +1,6 @@
 #include <stdio.h>
 #include <string.h>
+#include <stdlib.h>
 
 int main(int argc, char **argv)
 {
@@ -23,28 +24,28 @@
   }
   fscanf(f, "%d.%d,%d.%d.%d", &major, &minor, &day, &month, &year);
   fclose(f);
-  format = "/*
- * version.h file. Automatically generated by parse_version.
- */
-
-#ifndef __VERSION_H__
-#define __VERSION_H__
-
-/* Commodities.h defines IX_VERSION too, so wait for our defines
-   to come last, and undef the sucker now! */
-#undef IX_VERSION
-
-#define IX_NAME		\"ixemul.library\"
-#ifdef TRACE_LIBRARY
-#define IX_IDSTRING	\"ixemul %d.%d [trace, %s] (%d.%d.%d)\"
-#else
-#define IX_IDSTRING	\"ixemul %d.%d [%s] (%d.%d.%d)\"
-#endif
-#define IX_VERSION	%d
-#define IX_REVISION	%d
-#define IX_PRIORITY	0
-
-#endif
+  format = "/*\n\
+ * version.h file. Automatically generated by parse_version.\n\
+ */\n\
+\n\
+#ifndef __VERSION_H__\n\
+#define __VERSION_H__\n\
+\n\
+/* Commodities.h defines IX_VERSION too, so wait for our defines\n\
+   to come last, and undef the sucker now! */\n\
+#undef IX_VERSION\n\
+\n\
+#define IX_NAME		\"ixemul.library\"\n\
+#ifdef TRACE_LIBRARY\n\
+#define IX_IDSTRING	\"ixemul %d.%d [trace, %s] (%d.%d.%d)\"\n\
+#else\n\
+#define IX_IDSTRING	\"ixemul %d.%d [%s] (%d.%d.%d)\"\n\
+#endif\n\
+#define IX_VERSION	%d\n\
+#define IX_REVISION	%d\n\
+#define IX_PRIORITY	0\n\
+\n\
+#endif\n\
 ";
 
   tmp[0] = '\0';
